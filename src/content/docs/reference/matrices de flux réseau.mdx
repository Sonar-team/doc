---
title: Matrices de flux r√©seau
description: Format des matrices de flux r√©seau.
sidebar:
    order: 502
---

## üìä Proposition de nouveau format pour les matrices de flux r√©seau

Actuellement, notre format de matrice de flux est le suivant :

> **MAC Source | MAC Destination | Interface | L3 Protocol | IP Source | IP Source Type | IP Destination | IP Destination Type | L4 Protocol | Source Port | Destination Port | L7 Protocol | Taille des paquets | Count**

Cependant, ce format m√©lange plusieurs logiques :

* On oscille entre le **mod√®le TCP/IP** et le **mod√®le OSI**, sans choisir clairement.
* Certains champs sont ambigus (ex. : "Interface" ou "L3 Protocol") et les noms de colonnes ne refl√®tent pas toujours la structure r√©elle d‚Äôun paquet r√©seau.

---

## üéØ Objectif

Clarifier et normaliser le format des matrices pour qu‚Äôil :

* refl√®te la structure d‚Äôun paquet r√©seau tel qu‚Äôon le **parse r√©ellement** ;
* soit **compr√©hensible pour les analystes** et **interop√©rable** avec d‚Äôautres outils ;
* permette une **extension** future (ajout de protocoles, fusion de relev√©s, etc.).

---

## ‚úÖ Nouveau format propos√©

\| MAC Source | MAC Destination | EtherType | IP Source | Type IP Source | IP Destination | Type IP Destination | Protocole Transport | Port Source | Port Destination | Protocole Applicatif | Taille cumul√©e | Occurrences | Derni√®re apparition |

#### Description des champs :

* **MAC Source / Destination** : adresse de niveau 2 (couche liaison).
* **EtherType** : valeur du champ `ethertype` de l‚Äôent√™te Ethernet, indiquant le protocole encapsul√© (ex. IPv4, IPv6, ARP, PROFINET).
* **IP Source / Destination** : adresses IP si pr√©sentes (sinon vide).
* **Type IP** : `Unicast`, `Broadcast`, `Multicast`, selon l‚Äôadresse.
* **Protocole Transport** : TCP, UDP, ICMP (extrait du champ "Protocol" des en-t√™tes IPv4/IPv6).
* **Ports** : valides uniquement pour TCP/UDP, sinon `-`.
* **Protocole Applicatif** : DNS, HTTP, TLS, etc., si identifiable.
* **Taille cumul√©e** : total des octets sur ce flux.
* **Occurrences** : nombre d‚Äôapparitions du m√™me flux.
* **Derni√®re apparition** : date et heure du dernier paquet observ√© pour ce flux.

---

## ‚ùå √âl√©ments supprim√©s

* **Interface** : ne fait pas partie du flux lui-m√™me (d√©pend du contexte de capture).
* **Niveaux OSI mal utilis√©s** : les colonnes "L3", "L4", "L7" sont remplac√©es par des noms explicites, selon la vraie source de l‚Äôinformation (EtherType, Protocol, etc.).

---

## üß† Pourquoi ICMP dans la colonne transport ?

M√™me si ICMP n‚Äôest pas un protocole de transport dans le mod√®le OSI, **il est encapsul√© dans l‚ÄôIPv4 comme TCP ou UDP**, et analys√© √† partir du m√™me champ. D‚Äôun point de vue pratique, il est logique de l‚Äôafficher au m√™me niveau.

---

## üß† Pourquoi ne pas ajouter une colonne "Session" pour TLS ?

Parce que SONAR ne d√©chiffre pas les couches TLS pour acc√©der aux donn√©es encapsul√©es. On affiche le **protocole observable**, pas les couches logiques interm√©diaires non d√©crypt√©es.

---

## üìå Exemple (simplifi√©)

| MAC Source             | MAC Destination        | EtherType | IP Source    | Type IP Source | IP Destination | Type IP Destination | Transport | Port Src | Port Dst | Application | Taille | Occurrence | Derni√®re apparition |
| ---------------------- | ---------------------- | --------- | ------------ | -------------- | -------------- | ------------------- | --------- | -------- | -------- | ----------- | ------ | ---------- | ------------------- |
| 00:11:22:33:44:55      | FF\:FF\:FF\:FF\:FF\:FF | ARP       | -            | -              | -              | -                   | -         | -        | -        | -           | 128    | 3          | 2025-06-13 13:32:45 |
| AA\:BB\:CC\:DD\:EE\:FF | 11:22:33:44:55:66      | IPv4      | 192.168.1.12 | Unicast        | 192.168.1.1    | Unicast             | TCP       | 443      | 52428    | TLS         | 18200  | 7          | 2025-06-13 13:32:49 |

---

## üßæ Conclusion

Cette proposition vise √† clarifier la terminologie, √† s‚Äôaligner sur la **structure r√©elle des trames r√©seau**, et √† pr√©parer l‚Äôoutil pour de futures extensions. Si vous avez des retours ou d‚Äôautres cas √† couvrir, on peut ajuster.
